<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ—©ç¨²ç”°å¤§å­¦ å—é¨“ç”Ÿã‚µãƒãƒ¼ãƒˆ - ãƒ¯ã‚»ãƒ€ãƒãƒ¼ãƒˆ</title>
<meta name="description" content="æ—©ç¨²ç”°å¤§å­¦ã‚’ç›®æŒ‡ã™å—é¨“ç”Ÿã®ãŸã‚ã®æƒ…å ±ã‚µã‚¤ãƒˆã€‚åœ¨å­¦ç”Ÿã®åˆæ ¼ä½“é¨“è¨˜ã€å­¦éƒ¨ç´¹ä»‹ã€å‹‰å¼·ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€å—é¨“ç”ŸåŒå£«ã®æ²ç¤ºæ¿ãŒæƒã£ã¦ã„ã¾ã™ã€‚">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  :root {
    --crimson: #8B0000; --crimson-light: #A50000; --crimson-dark: #700000; --crimson-pale: #f9f0f0;
    --gold: #C8A951; --gold-light: #e8c96a;
    --dark: #1a1a1a; --gray: #6b6b6b; --gray-light: #9a9a9a; --gray-lighter: #d5d5d5;
    --white: #fff; --border: #e8e0e0; --bg: #faf8f8;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Noto Sans JP', sans-serif; background: var(--bg); color: var(--dark); line-height: 1.6; }

  /* HEADER */
  header { background: linear-gradient(135deg, var(--crimson) 0%, var(--crimson-dark) 100%); padding: 0 1.2rem; position: sticky; top: 0; z-index: 100; box-shadow: 0 3px 16px rgba(139,0,0,.3); }
  .header-inner { max-width: 1100px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; height: 58px; gap: 1rem; }
  .logo { display: flex; align-items: center; gap: 8px; text-decoration: none; flex-shrink: 0; }
  .logo-jp { font-size: 1.2rem; font-weight: 900; color: #fff; white-space: nowrap; }
  .logo-badge { font-size: .68rem; background: var(--gold); color: #1a1000; padding: 3px 9px; border-radius: 20px; font-weight: 700; white-space: nowrap; }
  .header-actions { display: flex; align-items: center; gap: .55rem; min-width: 0; }
  .btn-google-auth { background: #fff; color: #333; border: 1.5px solid #dadce0; border-radius: 18px; padding: 6px 12px; font-size: .76rem; font-weight: 700; display: inline-flex; align-items: center; gap: 6px; cursor: pointer; transition: all .2s; white-space: nowrap; }
  .btn-google-auth:hover { border-color: #c4c7cc; box-shadow: 0 1px 4px rgba(0,0,0,.1); }
  .btn-google-auth.logged-in { background: #f8f9fa; }
  .google-g { width: 18px; height: 18px; border-radius: 50%; background: conic-gradient(#4285f4 0 25%, #34a853 25% 50%, #fbbc05 50% 75%, #ea4335 75% 100%); color: #fff; font-size: 11px; line-height: 18px; text-align: center; font-weight: 900; display: inline-block; }
  .google-user-name { max-width: 90px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .header-back { color: rgba(255,255,255,.75); font-size: .82rem; text-decoration: none; display: flex; align-items: center; gap: 4px; white-space: nowrap; transition: color .2s; flex-shrink: 0; }
  .header-back:hover { color: #fff; }

  /* HERO */
  .hero { background: linear-gradient(160deg, var(--crimson-dark) 0%, var(--crimson) 60%, #a52020 100%); padding: 56px 1.2rem 48px; }
  .hero-inner { max-width: 680px; margin: 0 auto; text-align: center; }
  .hero-label { display: inline-block; background: var(--gold); color: #1a1000; font-size: .72rem; font-weight: 700; padding: 4px 14px; border-radius: 20px; margin-bottom: 1rem; letter-spacing: .05em; }
  .hero-title { font-size: 1.75rem; font-weight: 900; color: #fff; line-height: 1.45; margin-bottom: .8rem; }
  .hero-sub { font-size: .92rem; color: rgba(255,255,255,.82); line-height: 1.75; margin-bottom: 1.8rem; }
  .hero-btns { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
  .btn-hero { padding: 11px 24px; border-radius: 8px; font-weight: 700; font-size: .88rem; text-decoration: none; cursor: pointer; transition: all .2s; display: inline-block; font-family: 'Noto Sans JP', sans-serif; border: none; }
  .btn-hero-solid { background: #fff; color: var(--crimson); }
  .btn-hero-solid:hover { background: var(--gold); color: #1a1000; }
  .btn-hero-outline { background: transparent; color: #fff; border: 2px solid rgba(255,255,255,.55); }
  .btn-hero-outline:hover { background: rgba(255,255,255,.12); border-color: #fff; }

  /* TABS */
  .tabs { background: #fff; border-bottom: 2px solid #f0ede0; position: sticky; top: 58px; z-index: 90; box-shadow: 0 2px 12px rgba(0,0,0,.08); display: flex; align-items: center; }
  .tabs-scroll-btn { flex-shrink: 0; width: 28px; min-width: 28px; height: 28px; margin-right: 0.75rem; border: 1.5px solid var(--gray-lighter); border-radius: 50%; background: #fff; color: var(--gray-light); font-size: 0.85rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: color 0.2s, border-color 0.2s, box-shadow 0.2s, opacity 0.25s, width 0.25s, min-width 0.25s, margin-right 0.25s; box-shadow: 0 1px 4px rgba(0,0,0,0.08); user-select: none; overflow: hidden; }
  .tabs-scroll-btn:hover { border-color: var(--crimson); color: var(--crimson); box-shadow: 0 2px 8px rgba(139,0,0,0.15); }
  .tabs-scroll-btn.hidden { opacity: 0; pointer-events: none; width: 0; min-width: 0; margin-right: 0; border-width: 0; }
  .tabs-inner { padding: .6rem 1rem; display: flex; flex-wrap: nowrap; gap: .6rem; max-width: 1100px; margin: 0 auto; overflow-x: auto; scroll-behavior: smooth; }
  .tabs-inner::-webkit-scrollbar { height: 3px; }
  .tabs-inner::-webkit-scrollbar-track { background: rgba(0,0,0,.05); }
  .tabs-inner::-webkit-scrollbar-thumb { background: rgba(139,0,0,.2); border-radius: 2px; }
  .tab { display: inline-block; padding: 7px 13px; font-size: .82rem; font-weight: 600; background: #fff; color: var(--crimson); border: 1.5px solid var(--crimson); border-radius: 18px; cursor: pointer; transition: all .2s; white-space: nowrap; user-select: none; flex-shrink: 0; }
  .tab:hover { background: var(--crimson-pale); }
  .tab.active { background: linear-gradient(135deg, var(--crimson) 0%, var(--crimson-dark) 100%); color: #fff; border-color: var(--crimson-dark); font-weight: 700; box-shadow: 0 2px 8px rgba(139,0,0,.2); }

  /* TAB PANELS */
  .tab-panel { display: none; }
  .tab-panel.active { display: block; }
  .panel-inner { max-width: 1100px; margin: 0 auto; padding: 40px 1.2rem 60px; }

  /* SECTION HEADER */
  .sec-eye { font-size: .72rem; font-weight: 700; color: var(--crimson); letter-spacing: .08em; text-transform: uppercase; margin-bottom: .3rem; }
  .sec-title { font-size: 1.35rem; font-weight: 900; color: var(--dark); margin-bottom: .3rem; }
  .sec-div { width: 32px; height: 3px; background: var(--crimson); border-radius: 2px; margin: .4rem 0 .9rem; }
  .sec-sub { font-size: .86rem; color: var(--gray); margin-bottom: 1.6rem; line-height: 1.65; }

  /* FILTER CHIPS */
  .filter-bar { display: flex; gap: .5rem; flex-wrap: wrap; margin-bottom: 1.4rem; }
  .chip { font-size: .75rem; font-weight: 600; padding: 5px 12px; border-radius: 20px; border: 1.5px solid var(--border); background: #fff; color: var(--gray); cursor: pointer; transition: all .2s; white-space: nowrap; }
  .chip:hover { border-color: var(--crimson); color: var(--crimson); }
  .chip.active { background: var(--crimson); color: #fff; border-color: var(--crimson-dark); }

  /* â”€â”€â”€ FACULTY CARDS â”€â”€â”€ */
  .faculty-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
  .faculty-card { border: 1.5px solid var(--border); border-radius: 14px; background: #fff; overflow: hidden; transition: box-shadow .2s; }
  .faculty-card:hover { box-shadow: 0 4px 18px rgba(139,0,0,.1); }
  .faculty-card-head { padding: 1.1rem 1.1rem .7rem; cursor: pointer; }
  .faculty-campus-tag { font-size: .67rem; background: var(--crimson-pale); color: var(--crimson); padding: 2px 8px; border-radius: 4px; font-weight: 600; display: inline-block; margin-bottom: .5rem; }
  .faculty-card-name { font-size: 1rem; font-weight: 900; margin-bottom: .25rem; }
  .faculty-card-eng { font-size: .62rem; color: var(--gray-light); font-family: 'Playfair Display', serif; margin-bottom: .6rem; }
  .faculty-detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; padding: 0 1.1rem .9rem; }
  .faculty-detail-item { background: var(--bg); border-radius: 8px; padding: .5rem .7rem; }
  .faculty-detail-label { font-size: .65rem; font-weight: 700; color: var(--crimson); margin-bottom: .15rem; letter-spacing: .03em; }
  .faculty-detail-value { font-size: .78rem; color: var(--dark); line-height: 1.5; }
  .faculty-comments-area { border-top: 1.5px solid var(--border); padding: .8rem 1.1rem; }
  .faculty-comments-title { font-size: .75rem; font-weight: 700; color: var(--gray); margin-bottom: .5rem; }
  .faculty-comment-item { font-size: .78rem; color: var(--dark); background: var(--bg); border-radius: 6px; padding: .5rem .7rem; margin-bottom: .4rem; line-height: 1.55; }
  .faculty-comment-meta { font-size: .68rem; color: var(--gray-light); margin-top: .25rem; }
  .faculty-ask-btn { display: inline-block; margin-top: .6rem; font-size: .76rem; font-weight: 700; color: var(--crimson); cursor: pointer; }
  .faculty-ask-btn:hover { text-decoration: underline; }

  /* â”€â”€â”€ Q&A (å‹‰å¼·ã‚¢ãƒ‰ãƒã‚¤ã‚¹) â”€â”€â”€ */
  .qa-grid { display: flex; flex-direction: column; gap: .7rem; }
  .qa-card { border: 1.5px solid var(--border); border-radius: 10px; background: #fff; padding: 1rem 1.1rem; cursor: pointer; transition: border-color .2s; }
  .qa-card:hover { border-color: var(--crimson); }
  .qa-card.my-question { border-color: var(--gold-dark); box-shadow: 0 2px 10px rgba(200,169,81,.18); background: #fffdf5; }
  .qa-list-section-title { font-size: .78rem; font-weight: 800; color: var(--gray); margin: .2rem 0 .45rem; letter-spacing: .02em; }
  .qa-card-meta { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; margin-bottom: .35rem; }
  .qa-faculty-tag { font-size: .68rem; background: var(--crimson-pale); color: var(--crimson); padding: 2px 8px; border-radius: 4px; font-weight: 600; }
  .qa-open-badge { font-size: .68rem; background: #e8f5e9; color: #2e7d32; padding: 2px 8px; border-radius: 4px; font-weight: 600; }
  .qa-my-badge { font-size: .68rem; background: #fff8e1; color: #8a5d00; padding: 2px 8px; border-radius: 4px; font-weight: 700; }
  .qa-card-title { font-size: .93rem; font-weight: 700; margin-bottom: .25rem; }
  .qa-card-body { font-size: .8rem; color: var(--gray); overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; }
  .qa-card-footer { margin-top: .5rem; display: flex; gap: 1rem; font-size: .74rem; color: var(--gray-light); }

  /* Q&A post form */
  .qa-form-box { background: #fff; border: 1.5px solid var(--border); border-radius: 12px; padding: 1.3rem; margin-bottom: 1.4rem; }
  .qa-form-title { font-size: .95rem; font-weight: 700; margin-bottom: 1rem; }
  .qa-layout { display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; align-items: start; }

  /* Q&A detail modal */
  .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.5); z-index: 200; overflow-y: auto; }
  .modal-overlay.open { display: flex; align-items: flex-start; justify-content: center; padding: 2rem 1rem; }
  .modal { background: #fff; border-radius: 16px; width: 100%; max-width: 640px; overflow: hidden; }
  .modal-header { background: linear-gradient(135deg, var(--crimson) 0%, var(--crimson-dark) 100%); padding: 1rem 1.2rem; display: flex; align-items: center; justify-content: space-between; }
  .modal-header h3 { color: #fff; font-size: 1rem; font-weight: 700; }
  .modal-close { background: none; border: none; color: rgba(255,255,255,.8); font-size: 1.4rem; cursor: pointer; line-height: 1; }
  .modal-body { padding: 1.4rem; max-height: 70vh; overflow-y: auto; }
  .qa-question-box { background: var(--crimson-pale); border-radius: 10px; padding: 1rem; margin-bottom: 1rem; }
  .q-label { font-size: .75rem; font-weight: 700; color: var(--crimson); margin-bottom: .3rem; }
  .q-text { font-size: 1rem; font-weight: 700; margin-bottom: .4rem; }
  .answers-section h4 { font-size: .9rem; font-weight: 700; margin-bottom: .6rem; color: var(--dark); }
  .answer-item { border: 1px solid var(--border); border-radius: 8px; padding: .7rem; margin-bottom: .5rem; background: var(--bg); }
  .answer-meta { display: flex; gap: 8px; align-items: center; margin-bottom: .3rem; font-size: .75rem; color: var(--gray-light); }
  .answer-text { font-size: .85rem; color: var(--dark); line-height: 1.6; }
  .answer-input-area { margin-top: 1rem; padding-top: 1rem; border-top: 1.5px solid var(--border); }
  .answer-input-area h4 { font-size: .9rem; font-weight: 700; margin-bottom: .6rem; }

  /* â”€â”€â”€ BOARD â”€â”€â”€ */
  .board-layout { display: grid; grid-template-columns: 300px 1fr; gap: 1.4rem; align-items: start; }
  .post-form-box { background: #fff; border: 1.5px solid var(--border); border-radius: 14px; padding: 1.3rem; position: sticky; top: 112px; }
  .post-form-title { font-size: .95rem; font-weight: 700; color: var(--dark); display: flex; align-items: center; justify-content: space-between; }
  .post-form-toggle-icon { font-size: .75rem; color: var(--gray-light); transition: transform .2s; }
  .post-form-box.open .post-form-toggle-icon { transform: rotate(180deg); }
  .post-form-body { margin-top: 1rem; }
  @media (max-width: 860px) {
    .post-form-title { cursor: pointer; }
    .post-form-toggle-icon { display: inline-block; }
    .post-form-body { display: none; }
    .post-form-box.open .post-form-body { display: block; }
  }
  @media (min-width: 861px) {
    .post-form-toggle-icon { display: none; }
    .post-form-body { display: block !important; }
  }
  .board-posts { display: flex; flex-direction: column; gap: .7rem; }
  .board-card { background: #fff; border: 1.5px solid var(--border); border-radius: 12px; padding: 1rem 1.1rem; transition: border-color .2s; }
  .board-card:hover { border-color: var(--gray-lighter); }
  .board-card-meta { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; margin-bottom: .45rem; }
  .board-type-tag { font-size: .69rem; font-weight: 700; padding: 2px 8px; border-radius: 20px; white-space: nowrap; }
  .type-soudan    { background: #e3f0ff; color: #1a5cb8; }
  .type-shinchoku { background: #e8f5e9; color: #2e7d32; }
  .type-shitsumon { background: #fff8e1; color: #b77000; }
  .type-zatsudan  { background: #f3e5f5; color: #6a1b9a; }
  .board-faculty-tag { font-size: .69rem; background: var(--crimson-pale); color: var(--crimson); padding: 2px 8px; border-radius: 4px; font-weight: 600; white-space: nowrap; }
  .board-card-author { font-size: .73rem; color: var(--gray-light); }
  .board-card-time { font-size: .69rem; color: var(--gray-lighter); margin-left: auto; white-space: nowrap; }
  .board-card-body { font-size: .87rem; color: var(--dark); line-height: 1.65; }
  .board-card-footer { margin-top: .55rem; display: flex; gap: 1rem; font-size: .75rem; color: var(--gray-light); }
  .board-like { cursor: pointer; transition: color .15s; display: flex; align-items: center; gap: 3px; user-select: none; }
  .board-like:hover, .board-like.liked { color: var(--crimson); font-weight: 700; }

  /* â”€â”€â”€ TAIKENKI â”€â”€â”€ */
  .tk-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
  .tk-card { border: 1.5px solid var(--border); border-radius: 12px; background: #fff; padding: 1.1rem; cursor: pointer; transition: all .2s; }
  .tk-card:hover { border-color: var(--gold); box-shadow: 0 4px 14px rgba(200,169,81,.12); }
  .tk-card-head { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: .6rem; align-items: center; }
  .tk-faculty-tag { font-size: .7rem; background: var(--crimson-pale); color: var(--crimson); padding: 2px 9px; border-radius: 4px; font-weight: 600; }
  .tk-exam-tag { font-size: .7rem; background: #fff8e1; color: #b77000; padding: 2px 9px; border-radius: 4px; font-weight: 600; }
  .tk-stats { display: grid; grid-template-columns: 1fr 1fr; gap: .35rem; margin-bottom: .65rem; }
  .tk-stat { background: var(--bg); border-radius: 6px; padding: .35rem .55rem; }
  .tk-stat-label { font-size: .62rem; color: var(--gray-light); font-weight: 700; }
  .tk-stat-value { font-size: .78rem; font-weight: 700; color: var(--dark); }
  .tk-advice { font-size: .81rem; color: var(--gray); line-height: 1.6; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; line-clamp: 3; -webkit-box-orient: vertical; }
  .tk-meta { margin-top: .6rem; font-size: .72rem; color: var(--gray-light); }

  /* Taikenki detail modal */
  .tk-detail-item { margin-bottom: .6rem; }
  .tk-detail-label { font-size: .72rem; font-weight: 700; color: var(--crimson); margin-bottom: .15rem; }
  .tk-detail-value { font-size: .87rem; color: var(--dark); line-height: 1.6; }

  /* â”€â”€â”€ AFTER â”€â”€â”€ */
  .after-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 1rem; }
  .after-card { border: 1.5px solid var(--border); border-radius: 12px; padding: 1.2rem; background: #fff; transition: all .2s; }
  .after-card:hover { border-color: var(--gold); box-shadow: 0 4px 14px rgba(200,169,81,.12); transform: translateY(-2px); }
  .after-card-icon { font-size: 1.8rem; margin-bottom: .55rem; }
  .after-card-title { font-size: .93rem; font-weight: 700; margin-bottom: .3rem; }
  .after-card-desc { font-size: .78rem; color: var(--gray); line-height: 1.55; margin-bottom: .8rem; }
  .after-card-link { font-size: .76rem; color: var(--crimson); font-weight: 700; text-decoration: none; }
  .after-card-link:hover { text-decoration: underline; }

  /* SHARED FORM ELEMENTS */
  .form-group { margin-bottom: .8rem; }
  .form-label { display: block; font-size: .78rem; font-weight: 700; color: var(--dark); margin-bottom: .25rem; }
  .form-input { width: 100%; border: 1.5px solid var(--border); border-radius: 8px; padding: 8px 10px; font-size: .86rem; font-family: 'Noto Sans JP', sans-serif; background: var(--bg); transition: border-color .2s; }
  .form-input:focus { outline: none; border-color: var(--crimson); background: #fff; }
  .form-select { width: 100%; border: 1.5px solid var(--border); border-radius: 8px; padding: 8px 10px; font-size: .86rem; font-family: 'Noto Sans JP', sans-serif; background: var(--bg); cursor: pointer; }
  .form-select:focus { outline: none; border-color: var(--crimson); }
  .form-textarea { width: 100%; border: 1.5px solid var(--border); border-radius: 8px; padding: 9px 10px; font-size: .86rem; font-family: 'Noto Sans JP', sans-serif; resize: vertical; min-height: 90px; background: var(--bg); }
  .form-textarea:focus { outline: none; border-color: var(--crimson); background: #fff; }
  .btn-submit { width: 100%; background: var(--crimson); color: #fff; border: none; border-radius: 8px; padding: 11px; font-size: .88rem; font-weight: 700; cursor: pointer; transition: background .2s; font-family: 'Noto Sans JP', sans-serif; }
  .btn-submit:hover { background: var(--crimson-light); }
  .btn-submit:disabled { background: var(--gray-lighter); cursor: not-allowed; }
  .form-notice { font-size: .7rem; color: var(--gray-light); margin-top: .55rem; text-align: center; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: .7rem; }

  /* EMPTY STATE */
  .empty-state { text-align: center; padding: 2.8rem 1.5rem; border: 1.5px dashed var(--border); border-radius: 12px; grid-column: 1 / -1; }
  .empty-state-icon { font-size: 2.2rem; margin-bottom: .7rem; }
  .empty-state-title { font-size: .95rem; font-weight: 700; color: var(--gray); margin-bottom: .3rem; }
  .empty-state-text { font-size: .82rem; color: var(--gray-light); line-height: 1.6; }
  .empty-state-btn { margin-top: 1rem; display: inline-block; background: var(--crimson); color: #fff; padding: 9px 20px; border-radius: 8px; font-size: .83rem; font-weight: 700; text-decoration: none; }

  /* FOOTER */
  footer { background: var(--dark); color: rgba(255,255,255,.55); padding: 2rem 1.2rem; }
  .footer-inner { max-width: 700px; margin: 0 auto; text-align: center; }
  .footer-logo { font-size: 1rem; font-weight: 900; color: #fff; margin-bottom: .4rem; }
  .footer-link { color: var(--gold-light); text-decoration: none; }
  .footer-link:hover { text-decoration: underline; }
  .footer-disclaimer { font-size: .7rem; line-height: 1.8; margin-top: .9rem; color: rgba(255,255,255,.3); }

  .loading { text-align: center; padding: 2.5rem; color: var(--gray-light); font-size: .86rem; }

  /* RESPONSIVE */
  @media (max-width: 992px) {
    .tabs-inner { padding: .45rem .4rem; gap: .35rem; }
    .tab { font-size: .75rem; padding: 5px 10px; }
    .qa-layout { grid-template-columns: 1fr; }
  }
  @media (max-width: 860px) {
    .board-layout { grid-template-columns: 1fr; }
    .post-form-box { position: static; }
    .faculty-grid { grid-template-columns: 1fr; }
  }
  @media (max-width: 768px) {
    .panel-inner { padding: 32px 1rem 48px; }
    .hero { padding: 48px 1rem 40px; }
    .hero-title { font-size: 1.4rem; }
    .hero-btns { flex-direction: column; align-items: center; }
    .btn-hero { width: 100%; max-width: 260px; text-align: center; }
    .tk-grid { grid-template-columns: 1fr; }
    .after-grid { grid-template-columns: repeat(2, 1fr); }
    .form-row { grid-template-columns: 1fr; }
  }
  @media (max-width: 480px) {
    .tabs-inner { padding: .4rem .3rem; gap: .3rem; }
    .tab { font-size: .7rem; padding: 4px 8px; }
    .hero-title { font-size: 1.2rem; }
    .sec-title { font-size: 1.2rem; }
    .faculty-detail-grid { grid-template-columns: 1fr; }
    .after-grid { grid-template-columns: 1fr 1fr; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <a href="https://waseda-ten.vercel.app/" class="logo">
      <span class="logo-jp">ãƒ¯ã‚»ãƒ€ãƒãƒ¼ãƒˆ</span>
      <span class="logo-badge">å—é¨“ç”Ÿã‚µãƒãƒ¼ãƒˆ</span>
    </a>
    <div class="header-actions">
      <button class="btn-google-auth" id="googleAuthBtn" onclick="handleGoogleAuthClick()">Googleã§ãƒ­ã‚°ã‚¤ãƒ³</button>
      <a href="https://waseda-ten.vercel.app/" class="header-back">â† åœ¨å­¦ç”Ÿæ²ç¤ºæ¿ã¸</a>
    </div>
  </div>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-inner">
    <span class="hero-label">æ—©ç¨²ç”°å¤§å­¦ å—é¨“ç”Ÿã‚µãƒãƒ¼ãƒˆ</span>
    <h1 class="hero-title">æ—©ç¨²ç”°ã‚’ç›®æŒ‡ã™äººã®ãŸã‚ã®æƒ…å ±ã‚µã‚¤ãƒˆ</h1>
    <p class="hero-sub">åœ¨å­¦ç”Ÿã®ãƒªã‚¢ãƒ«ãªå£°ã¨ã€åŒã˜ç›®æ¨™ã‚’æŒã¤ä»²é–“ãŒé›†ã¾ã‚‹å ´æ‰€</p>
    <div class="hero-btns">
      <button class="btn-hero btn-hero-solid" onclick="switchTab('qa-tab')">åœ¨å­¦ç”Ÿã«è³ªå•ã™ã‚‹</button>
      <button class="btn-hero btn-hero-outline" onclick="switchTab('board-tab')">å—é¨“ç”Ÿæ²ç¤ºæ¿</button>
    </div>
  </div>
</section>

<!-- TABS -->
<div class="tabs">
  <div class="tabs-inner" id="tabsInner">
    <span class="tab active" data-tab="faculties-tab" onclick="switchTab('faculties-tab')">ğŸ« å­¦éƒ¨ç´¹ä»‹</span>
    <span class="tab" data-tab="qa-tab"        onclick="switchTab('qa-tab')">â“ å‹‰å¼·Q&A</span>
    <span class="tab" data-tab="qa-life-tab"   onclick="switchTab('qa-life-tab')">ğŸ« å¤§å­¦ç”Ÿæ´»Q&A</span>
    <span class="tab" data-tab="board-tab"     onclick="switchTab('board-tab')">ğŸ’¬ å—é¨“ç”Ÿæ²ç¤ºæ¿</span>
    <span class="tab" data-tab="taikenki-tab"  onclick="switchTab('taikenki-tab')">ğŸ† åˆæ ¼ä½“é¨“è¨˜</span>
    <span class="tab" data-tab="after-tab"     onclick="switchTab('after-tab')">ğŸ“ åˆæ ¼å¾Œã®æº–å‚™</span>
  </div>
  <button class="tabs-scroll-btn" id="tabsScrollBtn" onclick="scrollTabsRight()" aria-label="ã‚‚ã£ã¨è¦‹ã‚‹">â€º</button>
</div>

<!-- â•â•â• PANEL: å­¦éƒ¨ç´¹ä»‹ â•â•â• -->
<div id="panel-faculties-tab" class="tab-panel active">
  <div class="panel-inner">
    <div class="sec-eye">å¿—æœ›æ ¡é¸ã³</div>
    <h2 class="sec-title">å­¦éƒ¨ç´¹ä»‹</h2>
    <div class="sec-div"></div>
    <p class="sec-sub">æ—©ç¨²ç”°å¤§å­¦ã®13å­¦éƒ¨ã‚’å­¦éƒ¨åˆ¥ã«è©³ã—ãç´¹ä»‹ã—ã¾ã™ã€‚ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ²ç¤ºæ¿ã§è³ªå•ã§ãã¾ã™ã€‚</p>
    <div class="filter-bar" id="faculty-filter-bar"><!-- JSã§æç”» --></div>
    <div class="faculty-grid" id="faculty-grid"><!-- JSã§æç”» --></div>
  </div>
</div>

<!-- â•â•â• PANEL: å‹‰å¼·Q&A â•â•â• -->
<div id="panel-qa-tab" class="tab-panel">
  <div class="panel-inner">
    <div class="sec-eye">åœ¨å­¦ç”Ÿã¸ã®è³ªå•</div>
    <h2 class="sec-title">å‹‰å¼·ãƒ»å—é¨“ã‚¢ãƒ‰ãƒã‚¤ã‚¹ Q&A</h2>
    <div class="sec-div"></div>
    <p class="sec-sub">åœ¨å­¦ç”Ÿã«å—é¨“ã®ã“ã¨ã‚’ç›´æ¥è³ªå•ã§ãã¾ã™ã€‚æ—©ç¨²ç”°ç”ŸãŒçµŒé¨“ã‚’ã‚‚ã¨ã«å›ç­”ã—ã¾ã™ã€‚</p>
    <div class="qa-layout">
      <!-- æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ  -->
      <div class="qa-form-box">
        <div class="qa-form-title">â“ è³ªå•ã‚’æŠ•ç¨¿ã™ã‚‹</div>
        <div class="form-group">
          <label class="form-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ  <span style="color:#e74c3c">*</span></label>
          <input class="form-input" type="text" id="qa-author" placeholder="ä¾‹ï¼šæ—©å¤§å¿—æœ›é«˜3" maxlength="20">
        </div>
        <div class="form-group">
          <label class="form-label">å¿—æœ›å­¦éƒ¨</label>
          <select class="form-select" id="qa-faculty">
            <option value="">é¸æŠï¼ˆä»»æ„ï¼‰</option>
            <option value="seikei">æ”¿æ²»çµŒæ¸ˆ</option><option value="ho">æ³•</option>
            <option value="shogaku">å•†</option><option value="kyoiku">æ•™è‚²</option>
            <option value="bun">æ–‡</option><option value="bunkagaku">æ–‡åŒ–æ§‹æƒ³</option>
            <option value="kiso">åŸºå¹¹ç†å·¥</option><option value="sozo">å‰µé€ ç†å·¥</option>
            <option value="sentan">å…ˆé€²ç†å·¥</option><option value="ningen">äººé–“ç§‘å­¦</option>
            <option value="sports">ã‚¹ãƒãƒ¼ãƒ„ç§‘å­¦</option><option value="kokusai">å›½éš›æ•™é¤Š</option>
            <option value="shakou">ç¤¾ä¼šç§‘å­¦</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">è³ªå•ã‚¿ã‚¤ãƒˆãƒ« <span style="color:#e74c3c">*</span></label>
          <input class="form-input" type="text" id="qa-title" placeholder="ä¾‹ï¼šè‹±èªã®å¯¾ç­–ã¯ã©ã†ã—ã¾ã—ãŸã‹ï¼Ÿ" maxlength="60">
        </div>
        <div class="form-group">
          <label class="form-label">æœ¬æ–‡ <span style="color:#e74c3c">*</span></label>
          <textarea class="form-textarea" id="qa-body" placeholder="è³ªå•ã®è©³ç´°ã‚’æ›¸ã„ã¦ãã ã•ã„..."></textarea>
        </div>
        <button class="btn-submit" onclick="submitJukenQa(this, 'study')">è³ªå•ã‚’æŠ•ç¨¿ã™ã‚‹</button>
        <p class="form-notice">è‰¯è­˜ã‚ã‚‹æŠ•ç¨¿ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
      </div>
      <!-- Q&Aä¸€è¦§ -->
      <div>
        <div class="filter-bar" id="qa-faculty-filter"><!-- JS --></div>
        <div id="qa-list" class="qa-grid"><div class="loading">èª­ã¿è¾¼ã¿ä¸­...</div></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â• PANEL: å¤§å­¦ç”Ÿæ´»Q&A â•â•â• -->
<div id="panel-qa-life-tab" class="tab-panel">
  <div class="panel-inner">
    <div class="sec-eye">åœ¨å­¦ç”Ÿã¸ã®è³ªå•</div>
    <h2 class="sec-title">å¤§å­¦ç”Ÿæ´» Q&A</h2>
    <div class="sec-div"></div>
    <p class="sec-sub">ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã®é›°å›²æ°—ã€æ™‚é–“å‰²ã€é€šå­¦ã€ä¸€äººæš®ã‚‰ã—ã€ã‚µãƒ¼ã‚¯ãƒ«å‚åŠ ãªã©å¤§å­¦ç”Ÿæ´»ã«ã¤ã„ã¦è³ªå•ã§ãã¾ã™ã€‚</p>
    <div class="qa-layout">
      <div class="qa-form-box">
        <div class="qa-form-title">ğŸ« å¤§å­¦ç”Ÿæ´»ã«ã¤ã„ã¦è³ªå•ã™ã‚‹</div>
        <div class="form-group">
          <label class="form-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ  <span style="color:#e74c3c">*</span></label>
          <input class="form-input" type="text" id="qa-life-author" placeholder="ä¾‹ï¼šæ—©å¤§å¿—æœ›é«˜3" maxlength="20">
        </div>
        <div class="form-group">
          <label class="form-label">å¿—æœ›å­¦éƒ¨</label>
          <select class="form-select" id="qa-life-faculty">
            <option value="">é¸æŠï¼ˆä»»æ„ï¼‰</option>
            <option value="seikei">æ”¿æ²»çµŒæ¸ˆ</option><option value="ho">æ³•</option>
            <option value="shogaku">å•†</option><option value="kyoiku">æ•™è‚²</option>
            <option value="bun">æ–‡</option><option value="bunkagaku">æ–‡åŒ–æ§‹æƒ³</option>
            <option value="kiso">åŸºå¹¹ç†å·¥</option><option value="sozo">å‰µé€ ç†å·¥</option>
            <option value="sentan">å…ˆé€²ç†å·¥</option><option value="ningen">äººé–“ç§‘å­¦</option>
            <option value="sports">ã‚¹ãƒãƒ¼ãƒ„ç§‘å­¦</option><option value="kokusai">å›½éš›æ•™é¤Š</option>
            <option value="shakou">ç¤¾ä¼šç§‘å­¦</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">è³ªå•ã‚¿ã‚¤ãƒˆãƒ« <span style="color:#e74c3c">*</span></label>
          <input class="form-input" type="text" id="qa-life-title" placeholder="ä¾‹ï¼š1å¹´ç”Ÿã®æ™‚é–“å‰²ã¯ã©ã‚Œãã‚‰ã„å¿™ã—ã„ã§ã™ã‹ï¼Ÿ" maxlength="60">
        </div>
        <div class="form-group">
          <label class="form-label">æœ¬æ–‡ <span style="color:#e74c3c">*</span></label>
          <textarea class="form-textarea" id="qa-life-body" placeholder="è³ªå•ã®è©³ç´°ã‚’æ›¸ã„ã¦ãã ã•ã„..."></textarea>
        </div>
        <button class="btn-submit" onclick="submitJukenQa(this, 'life')">è³ªå•ã‚’æŠ•ç¨¿ã™ã‚‹</button>
        <p class="form-notice">è‰¯è­˜ã‚ã‚‹æŠ•ç¨¿ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
      </div>
      <div>
        <div class="filter-bar" id="qa-life-faculty-filter"><!-- JS --></div>
        <div id="qa-life-list" class="qa-grid"><div class="loading">èª­ã¿è¾¼ã¿ä¸­...</div></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â• PANEL: å—é¨“ç”Ÿæ²ç¤ºæ¿ â•â•â• -->
<div id="panel-board-tab" class="tab-panel">
  <div class="panel-inner">
    <div class="sec-eye">å—é¨“ç”Ÿã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</div>
    <h2 class="sec-title">å—é¨“ç”Ÿæ²ç¤ºæ¿</h2>
    <div class="sec-div"></div>
    <p class="sec-sub">åŒã˜ç›®æ¨™ã‚’æŒã¤ä»²é–“ã¨æƒ…å ±äº¤æ›ãƒ»é€²æ—å ±å‘ŠãŒã§ãã‚‹å ´æ‰€ã§ã™ã€‚</p>
    <div class="filter-bar" id="board-type-filter">
      <span class="chip active" data-type="all" onclick="filterBoard('all',this)">ã™ã¹ã¦</span>
      <span class="chip" data-type="ç›¸è«‡" onclick="filterBoard('ç›¸è«‡',this)">ç›¸è«‡</span>
      <span class="chip" data-type="é€²æ—å ±å‘Š" onclick="filterBoard('é€²æ—å ±å‘Š',this)">é€²æ—å ±å‘Š</span>
      <span class="chip" data-type="è³ªå•" onclick="filterBoard('è³ªå•',this)">è³ªå•</span>
      <span class="chip" data-type="é›‘è«‡" onclick="filterBoard('é›‘è«‡',this)">é›‘è«‡</span>
    </div>
    <div class="filter-bar" id="board-faculty-filter"><!-- JS --></div>
    <div class="board-layout">
      <div class="post-form-box" id="boardFormBox">
        <div class="post-form-title" onclick="toggleBoardForm()">
          <span>ğŸ“ æŠ•ç¨¿ã™ã‚‹</span>
          <span class="post-form-toggle-icon">â–¼</span>
        </div>
        <div class="post-form-body">
          <div class="form-group">
            <label class="form-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ  <span style="color:#e74c3c">*</span></label>
            <input class="form-input" type="text" id="boardNickname" placeholder="ä¾‹ï¼šæ—©ç¨²ç”°å¿—æœ›19æ­³" maxlength="20">
          </div>
          <div class="form-group">
            <label class="form-label">å¿—æœ›å­¦éƒ¨</label>
            <select class="form-select" id="boardFaculty">
              <option value="">å­¦éƒ¨ã‚’é¸æŠï¼ˆä»»æ„ï¼‰</option>
              <option value="seikei">æ”¿æ²»çµŒæ¸ˆå­¦éƒ¨</option><option value="ho">æ³•å­¦éƒ¨</option>
              <option value="shogaku">å•†å­¦éƒ¨</option><option value="kyoiku">æ•™è‚²å­¦éƒ¨</option>
              <option value="bun">æ–‡å­¦éƒ¨</option><option value="bunkagaku">æ–‡åŒ–æ§‹æƒ³å­¦éƒ¨</option>
              <option value="kiso">åŸºå¹¹ç†å·¥å­¦éƒ¨</option><option value="sozo">å‰µé€ ç†å·¥å­¦éƒ¨</option>
              <option value="sentan">å…ˆé€²ç†å·¥å­¦éƒ¨</option><option value="ningen">äººé–“ç§‘å­¦éƒ¨</option>
              <option value="sports">ã‚¹ãƒãƒ¼ãƒ„ç§‘å­¦éƒ¨</option><option value="kokusai">å›½éš›æ•™é¤Šå­¦éƒ¨</option>
              <option value="shakou">ç¤¾ä¼šç§‘å­¦éƒ¨</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">æŠ•ç¨¿ç¨®åˆ¥ <span style="color:#e74c3c">*</span></label>
            <select class="form-select" id="boardType">
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ç›¸è«‡">ç›¸è«‡</option><option value="é€²æ—å ±å‘Š">é€²æ—å ±å‘Š</option>
              <option value="è³ªå•">è³ªå•</option><option value="é›‘è«‡">é›‘è«‡</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">æœ¬æ–‡ <span style="color:#e74c3c">*</span></label>
            <textarea class="form-textarea" id="boardBody" placeholder="æ°—ã«ãªã‚‹ã“ã¨ã‚„é€²æ—ã‚’è‡ªç”±ã«æ›¸ã„ã¦ãã ã•ã„..."></textarea>
          </div>
          <button class="btn-submit" id="boardSubmitBtn" onclick="submitBoardPost(this)">æŠ•ç¨¿ã™ã‚‹</button>
          <p class="form-notice">è‰¯è­˜ã‚ã‚‹æŠ•ç¨¿ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
        </div>
      </div>
      <div id="board-posts" class="board-posts"><div class="loading">èª­ã¿è¾¼ã¿ä¸­...</div></div>
    </div>
  </div>
</div>

<!-- â•â•â• PANEL: åˆæ ¼ä½“é¨“è¨˜ â•â•â• -->
<div id="panel-taikenki-tab" class="tab-panel">
  <div class="panel-inner">
    <div class="sec-eye">å…ˆè¼©ã®åˆæ ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼</div>
    <h2 class="sec-title">åˆæ ¼ä½“é¨“è¨˜</h2>
    <div class="sec-div"></div>
    <p class="sec-sub">åˆæ ¼ã—ãŸå…ˆè¼©ãŸã¡ã®ãƒªã‚¢ãƒ«ãªä½“é¨“è¨˜ã€‚åœ¨å­¦ç”Ÿæ²ç¤ºæ¿ã®ã€Œå—é¨“ç”Ÿã‚µãƒãƒ¼ãƒˆã€ã‚¿ãƒ–ã‹ã‚‰æŠ•ç¨¿ã§ãã¾ã™ã€‚</p>
    <div class="filter-bar" id="tk-faculty-filter"><!-- JS --></div>
    <div id="taikenki-list" class="tk-grid"><div class="loading">èª­ã¿è¾¼ã¿ä¸­...</div></div>
  </div>
</div>

<!-- â•â•â• PANEL: åˆæ ¼å¾Œã®æº–å‚™ â•â•â• -->
<div id="panel-after-tab" class="tab-panel">
  <div class="panel-inner">
    <div class="sec-eye">åˆæ ¼ã—ãŸæ–¹ã¸</div>
    <h2 class="sec-title">åˆæ ¼å¾Œã®æº–å‚™</h2>
    <div class="sec-div"></div>
    <p class="sec-sub">åˆæ ¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚å…¥å­¦å‰ã«ç¢ºèªã—ã¦ãŠããŸã„ã“ã¨ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚</p>
    <div class="after-grid">
      <div class="after-card">
        <div class="after-card-icon">ğŸ“‹</div>
        <div class="after-card-title">å…¥å­¦æ‰‹ç¶šã</div>
        <div class="after-card-desc">å…¥å­¦é‡‘ãƒ»æˆæ¥­æ–™ã®æ”¯æ‰•ã„ã‚„æ›¸é¡æå‡ºã®ç· åˆ‡ãªã©ã€æ‰‹ç¶šãã®æµã‚Œã‚’å…ˆè¼©ã«ç¢ºèªã—ã‚ˆã†ã€‚</div>
        <a href="https://waseda-ten.vercel.app/" class="after-card-link">åœ¨å­¦ç”Ÿã«èã â†’</a>
      </div>
      <div class="after-card">
        <div class="after-card-icon">ğŸ </div>
        <div class="after-card-title">ä¸€äººæš®ã‚‰ã—æº–å‚™</div>
        <div class="after-card-desc">æ—©ç¨²ç”°å‘¨è¾ºã®å®¶è³ƒç›¸å ´ãƒ»ãŠã™ã™ã‚ã‚¨ãƒªã‚¢ãƒ»å¼•è¶Šã—æ™‚æœŸã®æ³¨æ„ç‚¹ãªã©ã€‚</div>
        <a href="https://waseda-ten.vercel.app/" class="after-card-link">åœ¨å­¦ç”Ÿã«èã â†’</a>
      </div>
      <div class="after-card">
        <div class="after-card-icon">ğŸ¯</div>
        <div class="after-card-title">ã‚µãƒ¼ã‚¯ãƒ«æƒ…å ±</div>
        <div class="after-card-desc">æ–°æ­“ã®æ™‚æœŸã€äººæ°—ã‚µãƒ¼ã‚¯ãƒ«ã€å…¼ã‚µãƒ¼ã®å®Ÿæ…‹ã¾ã§å…ˆè¼©ã‹ã‚‰æ•™ãˆã¦ã‚‚ã‚‰ãŠã†ã€‚</div>
        <a href="https://waseda-ten.vercel.app/" class="after-card-link">ã‚µãƒ¼ã‚¯ãƒ«æƒ…å ±ã‚’è¦‹ã‚‹ â†’</a>
      </div>
      <div class="after-card">
        <div class="after-card-icon">ğŸ“š</div>
        <div class="after-card-title">å±¥ä¿®ç™»éŒ²</div>
        <div class="after-card-desc">åˆã‚ã¦ã®å±¥ä¿®ç™»éŒ²ã¯æˆ¸æƒ‘ã†ã“ã¨ã‚‚ã€‚å˜ä½ã®å–ã‚Šæ–¹ã‚’å…ˆè¼©ã®æˆæ¥­å£ã‚³ãƒŸã§ç¢ºèªã—ã‚ˆã†ã€‚</div>
        <a href="https://waseda-ten.vercel.app/" class="after-card-link">æˆæ¥­å£ã‚³ãƒŸã‚’è¦‹ã‚‹ â†’</a>
      </div>
    </div>
  </div>
</div>

<!-- Q&A è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" id="qaModal">
  <div class="modal">
    <div class="modal-header">
      <h3>â“ è³ªå•ãƒ»å›ç­”</h3>
      <button class="modal-close" onclick="closeQaModal()">Ã—</button>
    </div>
    <div class="modal-body" id="qa-detail-content"></div>
  </div>
</div>

<!-- ä½“é¨“è¨˜è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-overlay" id="tkModal">
  <div class="modal">
    <div class="modal-header">
      <h3>ğŸ† åˆæ ¼ä½“é¨“è¨˜</h3>
      <button class="modal-close" onclick="closeTkModal()">Ã—</button>
    </div>
    <div class="modal-body" id="tk-detail-content"></div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-logo">ãƒ¯ã‚»ãƒ€ãƒãƒ¼ãƒˆ</div>
    <p style="font-size:.82rem;margin-bottom:.3rem;"><a href="https://waseda-ten.vercel.app/" class="footer-link">åœ¨å­¦ç”Ÿæ²ç¤ºæ¿ã¸æˆ»ã‚‹</a></p>
    <div class="footer-disclaimer">
      æœ¬ã‚µã‚¤ãƒˆã¯æ—©ç¨²ç”°å¤§å­¦ã®å…¬å¼ã‚µã‚¤ãƒˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ²è¼‰æƒ…å ±ã¯ã™ã¹ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æŠ•ç¨¿ã§ã‚ã‚Šã€å†…å®¹ã®æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
      å—é¨“ã«é–¢ã™ã‚‹æ­£ç¢ºãªæƒ…å ±ã¯å¿…ãš<a href="https://www.waseda.jp/" class="footer-link" target="_blank" rel="noopener">æ—©ç¨²ç”°å¤§å­¦å…¬å¼ã‚µã‚¤ãƒˆ</a>ã§ã”ç¢ºèªãã ã•ã„ã€‚
    </div>
  </div>
</footer>

<script>
// â”€â”€ Supabase â”€â”€
const SUPABASE_URL = 'https://hazntivymzywhowtdtcc.supabase.co';
const SUPABASE_ANON_KEY = 'sb_publishable_Mr1wt5ZOoLtmYqPEoIKeUw_cM4ZPSbN';
const AUTH_REDIRECT_URL = 'https://waseda-ten.vercel.app';
let db;
try {
  if (typeof createClient === 'function') db = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  else if (window.supabase?.createClient) db = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
} catch(e) { console.error('Supabase init:', e); }
let googleAuthUser = null;

// â”€â”€ å®šæ•° â”€â”€
const FACULTIES = {
  seikei:'æ”¿æ²»çµŒæ¸ˆå­¦éƒ¨', ho:'æ³•å­¦éƒ¨', shogaku:'å•†å­¦éƒ¨', kyoiku:'æ•™è‚²å­¦éƒ¨',
  bun:'æ–‡å­¦éƒ¨', bunkagaku:'æ–‡åŒ–æ§‹æƒ³å­¦éƒ¨', kiso:'åŸºå¹¹ç†å·¥å­¦éƒ¨', sozo:'å‰µé€ ç†å·¥å­¦éƒ¨',
  sentan:'å…ˆé€²ç†å·¥å­¦éƒ¨', ningen:'äººé–“ç§‘å­¦éƒ¨', sports:'ã‚¹ãƒãƒ¼ãƒ„ç§‘å­¦éƒ¨',
  kokusai:'å›½éš›æ•™é¤Šå­¦éƒ¨', shakou:'ç¤¾ä¼šç§‘å­¦éƒ¨'
};
const FACULTY_DATA = [
  { key:'seikei',    name:'æ”¿æ²»çµŒæ¸ˆå­¦éƒ¨', eng:'Political Science & Economics',  campus:'æ—©ç¨²ç”°',   vibe:'å°‘äººæ•°ã‚¼ãƒŸãŒå……å®Ÿã€‚æ”¿æ²»ãƒ»çµŒæ¸ˆãƒ»å›½éš›ã®3å°‚æ”»ã«åˆ†ã‹ã‚Œã‚‹ã€‚æ´»ç™ºãªãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³æ–‡åŒ–ã€‚', career:'ç·åˆå•†ç¤¾ãƒ»é‡‘èãƒ»å®˜å…¬åºãƒ»ã‚³ãƒ³ã‚µãƒ«ãƒ»ãƒã‚¹ã‚³ãƒŸãŒå¤šã„ã€‚å›½å®¶å…¬å‹™å“¡å¿—æœ›ã‚‚ã€‚', gender:'ç”·æ€§ã‚„ã‚„å¤šã‚ï¼ˆç´„6:4ï¼‰', hensachi:'67ã€œ70ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'ho',        name:'æ³•å­¦éƒ¨',       eng:'Law',                            campus:'æ—©ç¨²ç”°',   vibe:'æ³•å¾‹ãƒ»æ”¿æ²»ã®2å­¦ç§‘ã€‚è‡ªä¸»çš„ãªå­¦ç¿’ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã€‚å¸æ³•è©¦é¨“ã‚µãƒ¼ã‚¯ãƒ«ãŒç››ã‚“ã€‚', career:'æ³•æ›¹ãƒ»å®˜å…¬åºãƒ»é‡‘èãƒ»ã‚³ãƒ³ã‚µãƒ«ãƒ»å¤§æ‰‹ä¼æ¥­ã®æ³•å‹™éƒ¨é–€ã€‚', gender:'ç”·å¥³ã»ã¼åŠã€…', hensachi:'65ã€œ68ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'shogaku',   name:'å•†å­¦éƒ¨',       eng:'Commerce',                       campus:'æ—©ç¨²ç”°',   vibe:'ãƒãƒ¼ã‚±ãƒ»ä¼šè¨ˆãƒ»ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ãªã©å¹…åºƒã„ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ãŒæ´»ç™ºã€‚å°±è·æ„è­˜ãŒé«˜ã„å­¦ç”ŸãŒå¤šã„ã€‚', career:'é‡‘èãƒ»å•†ç¤¾ãƒ»ã‚³ãƒ³ã‚µãƒ«ãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»åºƒå‘Šã€‚å°±è·ç‡ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¹ã€‚', gender:'ç”·æ€§ã‚„ã‚„å¤šã‚ï¼ˆç´„6:4ï¼‰', hensachi:'65ã€œ68ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'kyoiku',    name:'æ•™è‚²å­¦éƒ¨',     eng:'Education',                      campus:'æ—©ç¨²ç”°',   vibe:'æ–‡ç³»ã‹ã‚‰ç†ç³»ã¾ã§å¤šå½©ãªå°‚ä¿®ã€‚ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ãªé›°å›²æ°—ã€‚æ•™è·èª²ç¨‹ãŒå……å®Ÿã€‚', career:'æ•™å“¡ãƒ»å…¬å‹™å“¡ãƒ»ä¸€èˆ¬ä¼æ¥­ã¨é€²è·¯ã¯å¹…åºƒã„ã€‚æ•™å“¡å…è¨±å–å¾—è€…ã‚‚å¤šã„ã€‚', gender:'å¥³æ€§ã‚„ã‚„å¤šã‚ï¼ˆç´„4:6ï¼‰', hensachi:'62ã€œ66ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'bun',       name:'æ–‡å­¦éƒ¨',       eng:'Humanities & Social Sciences',   campus:'æ—©ç¨²ç”°',   vibe:'æ–‡å­¦ãƒ»å“²å­¦ãƒ»å¿ƒç†ãƒ»ç¤¾ä¼šå­¦ãªã©æ·±ã„å­¦å•ã€‚è‡ªç”±ãªé›°å›²æ°—ã§å€‹æ€§çš„ãªå­¦ç”ŸãŒå¤šã„ã€‚', career:'å‡ºç‰ˆãƒ»ãƒã‚¹ã‚³ãƒŸãƒ»ä¸€èˆ¬ä¼æ¥­ãƒ»å¤§å­¦é™¢é€²å­¦ã¨å¤šæ§˜ã€‚', gender:'å¥³æ€§å¤šã‚ï¼ˆç´„3:7ï¼‰', hensachi:'63ã€œ66ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'bunkagaku', name:'æ–‡åŒ–æ§‹æƒ³å­¦éƒ¨', eng:'Culture, Media & Society',       campus:'æ—©ç¨²ç”°',   vibe:'æ–‡å­¦éƒ¨ã®å§‰å¦¹å­¦éƒ¨ã€‚ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ»è¡¨è±¡ãƒ»æ–‡åŒ–ã‚’å­¦ã¶ã€‚ãŠã—ã‚ƒã‚Œãªå­¦ç”ŸãŒå¤šã„å°è±¡ã€‚', career:'ãƒã‚¹ã‚³ãƒŸãƒ»åºƒå‘Šãƒ»å‡ºç‰ˆãƒ»ITãƒ»ä¸€èˆ¬ä¼æ¥­ã¨å¤šæ§˜ã€‚', gender:'å¥³æ€§å¤šã‚ï¼ˆç´„3:7ï¼‰', hensachi:'64ã€œ67ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'kiso',      name:'åŸºå¹¹ç†å·¥å­¦éƒ¨', eng:'Fundamental Sci. & Engineering', campus:'è¥¿æ—©ç¨²ç”°', vibe:'æ•°å­¦ãƒ»æƒ…å ±ãƒ»é›»æ°—é›»å­ãŒä¸­å¿ƒã€‚å®Ÿé¨“ãƒ»æ¼”ç¿’ãŒå¤šãå¿™ã—ã„ãŒä»²é–“æ„è­˜ãŒå¼·ã„ã€‚', career:'ITãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»é€šä¿¡ã€‚å¤§å­¦é™¢é€²å­¦ç‡ãŒé«˜ã„ï¼ˆç´„70%ï¼‰ã€‚', gender:'ç”·æ€§å¤šã‚ï¼ˆç´„8:2ï¼‰', hensachi:'64ã€œ68ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'sozo',      name:'å‰µé€ ç†å·¥å­¦éƒ¨', eng:'Creative Sci. & Engineering',    campus:'è¥¿æ—©ç¨²ç”°', vibe:'å»ºç¯‰ãƒ»æ©Ÿæ¢°ãƒ»ç’°å¢ƒè³‡æºã€‚ã‚‚ã®ã¥ãã‚ŠãŒå¥½ããªå­¦ç”ŸãŒé›†ã¾ã‚‹ã€‚å»ºç¯‰å­¦ç§‘ã¯ç‰¹ã«å¿™ã—ã„ã€‚', career:'å»ºè¨­ãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚å¤§å­¦é™¢é€²å­¦ã‚‚å¤šã„ã€‚', gender:'ç”·æ€§å¤šã‚ï¼ˆç´„7:3ï¼‰', hensachi:'63ã€œ67ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'sentan',    name:'å…ˆé€²ç†å·¥å­¦éƒ¨', eng:'Advanced Sci. & Engineering',    campus:'è¥¿æ—©ç¨²ç”°', vibe:'ç‰©ç†ãƒ»åŒ–å­¦ãƒ»ç”Ÿå‘½åŒ»ç§‘å­¦ã€‚ç ”ç©¶å¿—å‘ãŒå¼·ãå¤§å­¦é™¢é€²å­¦ç‡ãŒæœ€ã‚‚é«˜ã„å­¦éƒ¨ã®ä¸€ã¤ã€‚', career:'å¤§å­¦é™¢â†’ç ”ç©¶è·ãƒ»è£½è–¬ãƒ»ãƒã‚¤ã‚ªãŒå¤šã„ã€‚å¤§å­¦é™¢é€²å­¦ç‡ç´„80%ã€‚', gender:'ç”·æ€§å¤šã‚ï¼ˆç´„7:3ï¼‰', hensachi:'64ã€œ68ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'ningen',    name:'äººé–“ç§‘å­¦éƒ¨',   eng:'Human Sciences',                 campus:'æ‰€æ²¢',     vibe:'å¿ƒç†ãƒ»æ•™è‚²ãƒ»ç¤¾ä¼šå­¦ã®èåˆã€‚æ‰€æ²¢ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã§ã®ã‚“ã³ã‚Šã—ãŸé›°å›²æ°—ã€‚é€šå­¦æ³¨æ„ã€‚', career:'ä¸€èˆ¬ä¼æ¥­ãƒ»å…¬å‹™å“¡ãƒ»å¤§å­¦é™¢ãƒ»æ•™å“¡ã¨å¹…åºƒã„ã€‚', gender:'å¥³æ€§ã‚„ã‚„å¤šã‚ï¼ˆç´„4:6ï¼‰', hensachi:'60ã€œ64ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'sports',    name:'ã‚¹ãƒãƒ¼ãƒ„ç§‘å­¦éƒ¨',eng:'Sport Sciences',                campus:'æ‰€æ²¢',     vibe:'ã‚¹ãƒãƒ¼ãƒ„æ¨è–¦ã®å­¦ç”Ÿã‚‚å¤šãæ´»æ°—ãŒã‚ã‚‹ã€‚ä½“è‚²ä¼šç³»ã®é›°å›²æ°—ã€‚æ‰€æ²¢ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã€‚', career:'ã‚¹ãƒãƒ¼ãƒ„æ¥­ç•Œãƒ»æ•™å“¡ãƒ»ä¸€èˆ¬ä¼æ¥­ã€‚ã‚¢ã‚¹ãƒªãƒ¼ãƒˆã®å‰²åˆãŒé«˜ã„ã€‚', gender:'ç”·æ€§ã‚„ã‚„å¤šã‚ï¼ˆç´„6:4ï¼‰', hensachi:'55ã€œ62ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'kokusai',   name:'å›½éš›æ•™é¤Šå­¦éƒ¨', eng:'International Liberal Studies',  campus:'æ—©ç¨²ç”°',   vibe:'è‹±èªã§æˆæ¥­ã€‚å¸°å›½å­å¥³ãƒ»æµ·å¤–çµŒé¨“è€…ãŒå¤šã„ã€‚å›½éš›è‰²è±Šã‹ã€‚ç•™å­¦å¿…é ˆã€‚', career:'å¤–è³‡ç³»ãƒ»å›½éš›æ©Ÿé–¢ãƒ»å•†ç¤¾ãƒ»ã‚³ãƒ³ã‚µãƒ«ãƒ»ãƒã‚¹ã‚³ãƒŸã€‚è‹±èªåŠ›ã‚’æ´»ã‹ã™è·ç¨®ã€‚', gender:'å¥³æ€§å¤šã‚ï¼ˆç´„4:6ï¼‰', hensachi:'67ã€œ70ï¼ˆä¸€èˆ¬ï¼‰' },
  { key:'shakou',    name:'ç¤¾ä¼šç§‘å­¦éƒ¨',   eng:'Social Sciences',                campus:'æ—©ç¨²ç”°',   vibe:'å¤œé–“ã‹ã‚‰æ˜¼é–“ã«ç§»è¡Œã€‚æ–‡ç†èåˆã§è‡ªç”±ã«å­¦ã¹ã‚‹ã€‚ãƒã‚¤ãƒˆã‚„ã‚µãƒ¼ã‚¯ãƒ«ã¨ä¸¡ç«‹ã—ã‚„ã™ã„ã€‚', career:'ä¸€èˆ¬ä¼æ¥­ãƒ»å…¬å‹™å“¡ã¨å¹…åºƒã„ã€‚å°±è·ç‡ã¯é«˜ã„ã€‚', gender:'ç”·æ€§ã‚„ã‚„å¤šã‚ï¼ˆç´„6:4ï¼‰', hensachi:'65ã€œ68ï¼ˆä¸€èˆ¬ï¼‰' },
];
const TYPE_CLASSES = { 'ç›¸è«‡':'type-soudan', 'é€²æ—å ±å‘Š':'type-shinchoku', 'è³ªå•':'type-shitsumon', 'é›‘è«‡':'type-zatsudan' };

// â”€â”€ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ â”€â”€
function escHtml(s) { return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
function formatTime(ts) {
  const d = Math.floor((Date.now()-new Date(ts))/1000);
  if (d<60) return 'ãŸã£ãŸä»Š'; if (d<3600) return Math.floor(d/60)+'åˆ†å‰';
  if (d<86400) return Math.floor(d/3600)+'æ™‚é–“å‰'; return Math.floor(d/86400)+'æ—¥å‰';
}
function getDeviceId() {
  let id = localStorage.getItem('waseda_device_id');
  if (!id) { id='dev_'+Math.random().toString(36).substr(2,9)+'_'+Date.now().toString(36); localStorage.setItem('waseda_device_id',id); }
  return id;
}
function getGoogleDisplayName(user) {
  return user?.user_metadata?.name || user?.user_metadata?.full_name || user?.email || 'ãƒ­ã‚°ã‚¤ãƒ³ä¸­ãƒ¦ãƒ¼ã‚¶ãƒ¼';
}
function renderGoogleAuthButton() {
  const btn = document.getElementById('googleAuthBtn');
  if (!btn) return;
  if (googleAuthUser) {
    btn.classList.add('logged-in');
    btn.innerHTML = `<span class="google-g">G</span><span class="google-user-name">${escHtml(getGoogleDisplayName(googleAuthUser))}</span>`;
    btn.title = 'ã‚¯ãƒªãƒƒã‚¯ã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ';
  } else {
    btn.classList.remove('logged-in');
    btn.textContent = 'Googleã§ãƒ­ã‚°ã‚¤ãƒ³';
    btn.title = '';
  }
}
async function handleGoogleAuthClick() {
  if (!db?.auth) { alert('ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’åˆæœŸåŒ–ã§ãã¾ã›ã‚“ã§ã—ãŸ'); return; }
  if (googleAuthUser) {
    const { error } = await db.auth.signOut();
    if (error) alert('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
    return;
  }
  const redirectTo = AUTH_REDIRECT_URL;
  const { error } = await db.auth.signInWithOAuth({
    provider: 'google',
    options: { redirectTo }
  });
  if (error) {
    alert('Googleãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message + '\n\nç¢ºèªäº‹é …:\n1) Supabaseã§Googleãƒ—ãƒ­ãƒã‚¤ãƒ€æœ‰åŠ¹åŒ–\n2) Redirect URLã« ' + redirectTo + ' ã‚’ç™»éŒ²\n3) ãƒãƒƒãƒˆæ¥ç¶šã¨ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µã®ãƒ–ãƒ­ãƒƒã‚¯ç¢ºèª');
  }
}
async function initGoogleAuth() {
  if (!db?.auth) return;
  const { data, error } = await db.auth.getSession();
  if (!error) googleAuthUser = data?.session?.user || null;
  renderGoogleAuthButton();
  db.auth.onAuthStateChange((_event, session) => {
    googleAuthUser = session?.user || null;
    renderGoogleAuthButton();
  });
}
function getMyQuestionIds() {
  try { return new Set(JSON.parse(localStorage.getItem('waseda_my_question_ids') || '[]')); }
  catch { return new Set(); }
}
function rememberMyQuestionId(id) {
  if (!id) return;
  const set = getMyQuestionIds();
  set.add(String(id));
  const arr = [...set];
  if (arr.length > 300) arr.splice(0, arr.length - 300);
  localStorage.setItem('waseda_my_question_ids', JSON.stringify(arr));
}
function getLikedPosts() { try{return new Set(JSON.parse(localStorage.getItem('waseda_liked')||'[]'));}catch{return new Set();} }
function setPostLiked(id,liked) { const s=getLikedPosts(); liked?s.add(String(id)):s.delete(String(id)); localStorage.setItem('waseda_liked',JSON.stringify([...s])); }

// â”€â”€ ã‚¿ãƒ–åˆ‡æ›¿ â”€â”€
let currentTab = 'faculties-tab';
const loaded = new Set();

function switchTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tab));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.getElementById('panel-'+tab).classList.add('active');
  currentTab = tab;
  document.querySelector('.tabs').scrollIntoView({behavior:'smooth', block:'nearest'});
  // é…å»¶ãƒ­ãƒ¼ãƒ‰
  if (!loaded.has(tab)) { loaded.add(tab); loadTab(tab); }
}

function scrollTabsRight() {
  document.getElementById('tabsInner').scrollBy({ left: 140, behavior: 'smooth' });
}
function updateScrollBtn() {
  const inner = document.getElementById('tabsInner');
  const btn   = document.getElementById('tabsScrollBtn');
  if (!inner || !btn) return;
  const atEnd = inner.scrollLeft + inner.clientWidth >= inner.scrollWidth - 4;
  btn.classList.toggle('hidden', atEnd);
}

function loadTab(tab) {
  if (tab==='faculties-tab') { renderFacultyGrid(); loadFacultyComments(); }
  if (tab==='qa-tab')        { loadQaList('study'); buildFacultyFilter('qa-faculty-filter', (fac, el) => filterQa('study', fac, el)); }
  if (tab==='qa-life-tab')   { loadQaList('life'); buildFacultyFilter('qa-life-faculty-filter', (fac, el) => filterQa('life', fac, el)); }
  if (tab==='board-tab')     { loadBoardPosts(); buildFacultyFilter('board-faculty-filter', filterBoard2); }
  if (tab==='taikenki-tab')  { loadTaikenki(); buildFacultyFilter('tk-faculty-filter', filterTk); }
}

// â”€â”€ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¼ç”Ÿæˆ â”€â”€
function buildFacultyFilter(containerId, callback) {
  const el = document.getElementById(containerId);
  if (!el || el.children.length) return;
  const all = document.createElement('span');
  all.className = 'chip active'; all.textContent = 'ã™ã¹ã¦'; all.dataset.fac = 'all';
  all.onclick = () => callback('all', all);
  el.appendChild(all);
  Object.entries(FACULTIES).forEach(([k,v]) => {
    const c = document.createElement('span');
    c.className = 'chip'; c.textContent = v.replace('å­¦éƒ¨',''); c.dataset.fac = k;
    c.onclick = () => callback(k, c);
    el.appendChild(c);
  });
}
function setActiveChip(container, el) {
  document.querySelectorAll(`#${container} .chip`).forEach(c => c.classList.remove('active'));
  el.classList.add('active');
}

// â•â•â•â• å­¦éƒ¨ç´¹ä»‹ â•â•â•â•
let facultyCommentsData = {};

function renderFacultyGrid(filterFac='all') {
  const grid = document.getElementById('faculty-grid');
  const list = filterFac === 'all' ? FACULTY_DATA : FACULTY_DATA.filter(f => f.key === filterFac);
  grid.innerHTML = list.map(f => {
    const comments = (facultyCommentsData[f.key]||[]).slice(0,3);
    const cmtHtml = comments.length
      ? comments.map(c => `<div class="faculty-comment-item">${escHtml(c.body)}<div class="faculty-comment-meta">@${escHtml(c.author)} Â· ${formatTime(c.created_at)}</div></div>`).join('')
      : `<div style="font-size:.78rem;color:var(--gray-light);padding:.3rem 0">ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</div>`;
    return `<div class="faculty-card">
      <div class="faculty-card-head" onclick="focusBoardWithFaculty('${f.key}')">
        <span class="faculty-campus-tag">ğŸ“ ${f.campus}</span>
        <div class="faculty-card-name">${f.name}</div>
        <div class="faculty-card-eng">${f.eng}</div>
      </div>
      <div class="faculty-detail-grid">
        <div class="faculty-detail-item"><div class="faculty-detail-label">é›°å›²æ°—ãƒ»ç‰¹å¾´</div><div class="faculty-detail-value">${f.vibe}</div></div>
        <div class="faculty-detail-item"><div class="faculty-detail-label">å°±è·å…ˆãƒ»é€²è·¯</div><div class="faculty-detail-value">${f.career}</div></div>
        <div class="faculty-detail-item"><div class="faculty-detail-label">ç”·å¥³æ¯”ï¼ˆç›®å®‰ï¼‰</div><div class="faculty-detail-value">${f.gender}</div></div>
        <div class="faculty-detail-item"><div class="faculty-detail-label">åå·®å€¤ãƒ»å…¥è©¦</div><div class="faculty-detail-value">${f.hensachi}</div></div>
      </div>
      <div class="faculty-comments-area">
        <div class="faculty-comments-title">ğŸ’¬ åœ¨å­¦ç”Ÿã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ</div>
        ${cmtHtml}
        <span class="faculty-ask-btn" onclick="focusBoardWithFaculty('${f.key}')">è³ªå•ã™ã‚‹ â†’</span>
      </div>
    </div>`;
  }).join('');

  // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¼
  const bar = document.getElementById('faculty-filter-bar');
  if (!bar.children.length) {
    const all = document.createElement('span');
    all.className = 'chip active'; all.textContent = 'ã™ã¹ã¦'; all.dataset.fac = 'all';
    all.onclick = () => { setActiveChip('faculty-filter-bar', all); renderFacultyGrid('all'); };
    bar.appendChild(all);
    FACULTY_DATA.forEach(f => {
      const c = document.createElement('span');
      c.className = 'chip'; c.textContent = f.name.replace('å­¦éƒ¨',''); c.dataset.fac = f.key;
      c.onclick = () => { setActiveChip('faculty-filter-bar', c); renderFacultyGrid(f.key); };
      bar.appendChild(c);
    });
  }
}

async function loadFacultyComments() {
  if (!db) return;
  try {
    const { data } = await db.from('posts').select('*').eq('category','faculty_comment').order('created_at',{ascending:false}).limit(100);
    if (data) {
      facultyCommentsData = {};
      data.forEach(c => { if (!facultyCommentsData[c.faculty]) facultyCommentsData[c.faculty]=[]; facultyCommentsData[c.faculty].push(c); });
    }
    renderFacultyGrid();
  } catch(e) { console.error(e); }
}

function focusBoardWithFaculty(key) {
  switchTab('qa-tab');
  setTimeout(() => {
    const sel = document.getElementById('qa-faculty');
    if (sel) sel.value = key;
    document.getElementById('qa-title')?.focus();
  }, 100);
}

// â•â•â•â• å‹‰å¼·ã‚¢ãƒ‰ãƒã‚¤ã‚¹ Q&A â•â•â•â•
let qaAllPosts = [];
let qaLifeAllPosts = [];
let qaFacultyFilter = 'all';
let qaLifeFacultyFilter = 'all';

async function loadQaList(kind='study') {
  const isLife = kind === 'life';
  const el = document.getElementById(isLife ? 'qa-life-list' : 'qa-list');
  if (!db) { el.innerHTML = emptyState('â“','DBæœªæ¥ç¶š','',false); return; }
  try {
    const category = isLife ? 'juken_life_qa' : 'juken_qa';
    const { data, error } = await db.from('posts').select('*').eq('category', category).order('created_at',{ascending:false}).limit(50);
    if (error) throw error;
    if (isLife) qaLifeAllPosts = data || [];
    else qaAllPosts = data || [];
    renderQaList(kind);
  } catch(e) { console.error(e); el.innerHTML = emptyState('âš ï¸','èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼','',false); }
}

function renderQaList(kind='study') {
  const isLife = kind === 'life';
  const el = document.getElementById(isLife ? 'qa-life-list' : 'qa-list');
  const basePosts = isLife ? qaLifeAllPosts : qaAllPosts;
  const facFilter = isLife ? qaLifeFacultyFilter : qaFacultyFilter;
  const myIds = getMyQuestionIds();
  const currentNick = localStorage.getItem('waseda_nickname') || '';
  const posts = facFilter==='all' ? basePosts : basePosts.filter(p=>p.faculty===facFilter);
  if (!posts.length) { el.innerHTML = emptyState('â“','ã¾ã è³ªå•ãŒã‚ã‚Šã¾ã›ã‚“','æœ€åˆã«è³ªå•ã‚’æŠ•ç¨¿ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼',false); return; }
  const sortedPosts = [...posts].sort((a, b) => {
    const mineA = (a.device_id === getDeviceId() || myIds.has(String(a.id)) || (currentNick && a.author === currentNick)) ? 1 : 0;
    const mineB = (b.device_id === getDeviceId() || myIds.has(String(b.id)) || (currentNick && b.author === currentNick)) ? 1 : 0;
    if (mineA !== mineB) return mineB - mineA;
    return new Date(b.created_at || 0) - new Date(a.created_at || 0);
  });
  const mine = [];
  const others = [];
  sortedPosts.forEach(p => {
    const isMine = (p.device_id === getDeviceId() || myIds.has(String(p.id)) || (currentNick && p.author === currentNick));
    if (isMine) mine.push(p); else others.push(p);
  });

  const renderCard = (p) => {
    const isMine = (p.device_id === getDeviceId() || myIds.has(String(p.id)) || (currentNick && p.author === currentNick));
    const myTag = isMine ? '<span class="qa-my-badge">ğŸ§· ã‚ãªãŸã®è³ªå•</span>' : '';
    const fTag = p.faculty ? `<span class="qa-faculty-tag">${escHtml(FACULTIES[p.faculty]||p.faculty)}</span>` : '';
    return `<div class="qa-card${isMine ? ' my-question' : ''}" onclick="openQaDetail(${JSON.stringify(p.id)})">
      <div class="qa-card-meta">${myTag}${fTag}<span class="qa-open-badge">ğŸ”“ å›ç­”å‹Ÿé›†ä¸­</span><span style="font-size:.69rem;color:var(--gray-light)">@${escHtml(p.author)} Â· ${formatTime(p.created_at)}</span></div>
      <div class="qa-card-title">${escHtml(p.title)}</div>
      <div class="qa-card-body">${escHtml(p.body)}</div>
      <div class="qa-card-footer"><span>ğŸ’¬ å›ç­” ${p.comments||0}ä»¶</span><span>â¤ï¸ ${p.likes||0}</span></div>
    </div>`;
  };

  const mineSection = mine.length
    ? `<div class="qa-list-section-title">ğŸ§· ã‚ãªãŸã®è³ªå•ï¼ˆ${mine.length}ï¼‰</div>${mine.map(p => renderCard(p)).join('')}`
    : '';
  const othersSection = others.length
    ? `<div class="qa-list-section-title">ğŸ“š ã¿ã‚“ãªã®è³ªå•</div>${others.map(p => renderCard(p)).join('')}`
    : '';

  el.innerHTML = `${mineSection}${othersSection}`;
}

function filterQa(kind, fac, el) {
  if (kind === 'life') {
    setActiveChip('qa-life-faculty-filter', el);
    qaLifeFacultyFilter = fac;
    renderQaList('life');
    return;
  }
  setActiveChip('qa-faculty-filter', el);
  qaFacultyFilter = fac;
  renderQaList('study');
}

async function submitJukenQa(btn, kind='study') {
  const isLife = kind === 'life';
  const author = document.getElementById(isLife ? 'qa-life-author' : 'qa-author').value.trim();
  const faculty = document.getElementById(isLife ? 'qa-life-faculty' : 'qa-faculty').value;
  const title  = document.getElementById(isLife ? 'qa-life-title' : 'qa-title').value.trim();
  const body   = document.getElementById(isLife ? 'qa-life-body' : 'qa-body').value.trim();
  if (!author) { alert('ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (!title)  { alert('è³ªå•ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (!body)   { alert('æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (!db)     { alert('DBæœªæ¥ç¶š'); return; }
  btn.disabled=true; btn.textContent='æŠ•ç¨¿ä¸­...';
  try {
    const { data, error } = await db.from('posts').insert([{
      category: isLife ? 'juken_life_qa' : 'juken_qa', author, title, body, faculty:faculty||null,
      likes:0, comments:0, device_id:getDeviceId()
    }]).select('id').single();
    if (error) throw error;
    if (data?.id) rememberMyQuestionId(data.id);
    (isLife ? ['qa-life-author','qa-life-faculty','qa-life-title','qa-life-body'] : ['qa-author','qa-faculty','qa-title','qa-body'])
      .forEach(id=>{ const e=document.getElementById(id); if(e) e.value=''; });
    await loadQaList(kind);
  } catch(e) { console.error(e); alert('æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + (e?.message || e?.code || JSON.stringify(e))); }
  finally { btn.disabled=false; btn.textContent='è³ªå•ã‚’æŠ•ç¨¿ã™ã‚‹'; }
}

// Q&A è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«
async function openQaDetail(id) {
  if (!db) return;
  try {
    const { data: post } = await db.from('posts').select('*').eq('id',id).single();
    if (!post) return;
    const { data: answers } = await db.from('answers').select('*').eq('post_id',id).order('created_at',{ascending:true});
    const ans = answers || [];
    const ansHtml = !ans.length
      ? '<p style="color:#aaa;font-size:.84rem;text-align:center;padding:1rem">ã¾ã å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã«å›ç­”ã—ã‚ˆã†ï¼</p>'
      : ans.map(a=>`<div class="answer-item"><div class="answer-meta"><span>@${escHtml(a.author)}</span><span>${formatTime(a.created_at)}</span></div><div class="answer-text">${escHtml(a.text)}</div></div>`).join('');
    document.getElementById('qa-detail-content').innerHTML = `
      <div class="qa-question-box">
        <div class="q-label">â“ è³ªå•</div>
        <div class="q-text">${escHtml(post.title)}</div>
        <div style="font-size:.84rem;color:var(--gray);margin-top:.5rem;line-height:1.65">${escHtml(post.body)}</div>
        <div style="font-size:.72rem;color:#aaa;margin-top:.4rem">@${escHtml(post.author)} Â· ${formatTime(post.created_at)}${post.faculty?' Â· '+FACULTIES[post.faculty]:''}</div>
      </div>
      <div class="answers-section"><h4>ğŸ’¬ å›ç­” ${ans.length}ä»¶</h4>${ansHtml}</div>
      <div class="answer-input-area">
        <h4>âœï¸ å›ç­”ã™ã‚‹</h4>
        <textarea class="form-textarea" id="ans-input-${id}" placeholder="ã‚ãªãŸã®çµŒé¨“ã‚„çŸ¥è­˜ã‚’ã‚·ã‚§ã‚¢ã—ã¦ãã ã•ã„..."></textarea>
        <button class="btn-submit" style="margin-top:.6rem" onclick="submitJukenAnswer(${JSON.stringify(id)})">å›ç­”ã‚’æŠ•ç¨¿</button>
      </div>`;
    document.getElementById('qaModal').classList.add('open');
  } catch(e) { console.error(e); }
}

async function submitJukenAnswer(postId) {
  const input = document.getElementById(`ans-input-${postId}`);
  const text = input ? input.value.trim() : '';
  if (!text) { alert('å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  const nick = localStorage.getItem('waseda_nickname') || 'åŒ¿å';
  const btn = event.target; btn.disabled=true; btn.textContent='æŠ•ç¨¿ä¸­...';
  try {
    const { error } = await db.from('answers').insert([{ post_id:postId, author:nick, text, device_id:getDeviceId() }]);
    if (error) throw error;
    const cur = qaAllPosts.find(p=>p.id===postId) || qaLifeAllPosts.find(p=>p.id===postId);
    if (cur) await db.from('posts').update({comments:(cur.comments||0)+1}).eq('id',postId);
    if (cur && cur.category === 'juken_life_qa') await loadQaList('life');
    else await loadQaList('study');
    await openQaDetail(postId);
  } catch(e) { console.error(e); alert('æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ'); }
  finally { btn.disabled=false; btn.textContent='å›ç­”ã‚’æŠ•ç¨¿'; }
}

function closeQaModal() { document.getElementById('qaModal').classList.remove('open'); }

// â•â•â•â• å—é¨“ç”Ÿæ²ç¤ºæ¿ â•â•â•â•
let boardAllPosts = [];
let boardTypeFilter = 'all';
let boardFacFilter = 'all';

async function loadBoardPosts() {
  const el = document.getElementById('board-posts');
  if (!db) { el.innerHTML = '<div class="loading">DBæœªæ¥ç¶š</div>'; return; }
  try {
    const { data, error } = await db.from('posts').select('*').eq('category','juken').order('created_at',{ascending:false}).limit(40);
    if (error) throw error;
    boardAllPosts = (data||[]).filter(p => p.circle_type!=='advice' && p.circle_type!=='taikenki');
    renderBoardPosts();
  } catch(e) { console.error(e); document.getElementById('board-posts').innerHTML='<div class="loading">èª­ã¿è¾¼ã¿å¤±æ•—</div>'; }
}

function filterBoard(type, el) {
  setActiveChip('board-type-filter', el); boardTypeFilter=type; renderBoardPosts();
}
function filterBoard2(fac, el) {
  setActiveChip('board-faculty-filter', el); boardFacFilter=fac; renderBoardPosts();
}

function renderBoardPosts() {
  const el = document.getElementById('board-posts');
  let posts = boardAllPosts;
  if (boardTypeFilter !== 'all') posts = posts.filter(p=>p.circle_type===boardTypeFilter);
  if (boardFacFilter  !== 'all') posts = posts.filter(p=>p.faculty===boardFacFilter);
  if (!posts.length) { el.innerHTML=`<div class="empty-state"><div class="empty-state-icon">ğŸ’¬</div><div class="empty-state-title">æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</div><div class="empty-state-text">æœ€åˆã®æŠ•ç¨¿è€…ã«ãªã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</div></div>`; return; }
  const likedSet = getLikedPosts();
  el.innerHTML = posts.map(p => {
    const typeClass = TYPE_CLASSES[p.circle_type]||'type-zatsudan';
    const typeTag = p.circle_type ? `<span class="board-type-tag ${typeClass}">${escHtml(p.circle_type)}</span>` : '';
    const facTag  = p.faculty ? `<span class="board-faculty-tag">${escHtml(FACULTIES[p.faculty]||p.faculty)}</span>` : '';
    const likedCls = likedSet.has(String(p.id))?' liked':'';
    return `<div class="board-card">
      <div class="board-card-meta">${typeTag}${facTag}<span class="board-card-author">@${escHtml(p.author)}</span><span class="board-card-time">${formatTime(p.created_at)}</span></div>
      <div class="board-card-body">${escHtml(p.body)}</div>
      <div class="board-card-footer">
        <span class="board-like${likedCls}" onclick="likeBoardPost(${JSON.stringify(p.id)},this)">â¤ï¸ <span class="like-num">${p.likes||0}</span></span>
        <span>ğŸ’¬ ${p.comments||0}</span>
      </div>
    </div>`;
  }).join('');
}

async function likeBoardPost(id, el) {
  if (!db) return;
  const already = getLikedPosts().has(String(id));
  const numEl = el.querySelector('.like-num');
  const cur = numEl ? parseInt(numEl.textContent||'0') : 0;
  const next = already ? Math.max(0,cur-1) : cur+1;
  if (numEl) numEl.textContent = next;
  el.classList.toggle('liked', !already); setPostLiked(id, !already);
  const { error } = await db.from('posts').update({likes:next}).eq('id',id);
  if (error) { if(numEl) numEl.textContent=cur; el.classList.toggle('liked',already); setPostLiked(id,already); }
}

function toggleBoardForm() {
  if (window.innerWidth > 860) return;
  document.getElementById('boardFormBox').classList.toggle('open');
}

async function submitBoardPost(btn) {
  const nickname = document.getElementById('boardNickname').value.trim();
  const faculty  = document.getElementById('boardFaculty').value;
  const type     = document.getElementById('boardType').value;
  const body     = document.getElementById('boardBody').value.trim();
  if (!nickname) { alert('ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (!type)     { alert('æŠ•ç¨¿ç¨®åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„'); return; }
  if (!body)     { alert('æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (!db) { alert('DBæœªæ¥ç¶š'); return; }
  btn.disabled=true; btn.textContent='æŠ•ç¨¿ä¸­...';
  try {
    const { error } = await db.from('posts').insert([{
      category:'juken', author:nickname, title:body.slice(0,40), body,
      faculty:faculty||null, circle_type:type, likes:0, comments:0, device_id:getDeviceId()
    }]);
    if (error) throw error;
    ['boardNickname','boardFaculty','boardType','boardBody'].forEach(id=>{ const e=document.getElementById(id); if(e) e.value=''; });
    await loadBoardPosts();
    document.getElementById('board-posts').scrollIntoView({behavior:'smooth'});
  } catch(e) { console.error(e); alert('æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + (e?.message || JSON.stringify(e))); }
  finally { btn.disabled=false; btn.textContent='æŠ•ç¨¿ã™ã‚‹'; }
}

// â•â•â•â• åˆæ ¼ä½“é¨“è¨˜ â•â•â•â•
let tkAllData = [];
let tkFacFilter = 'all';

function parseTk(t) {
  const ef = t.extra_fields ? (typeof t.extra_fields === 'string' ? JSON.parse(t.extra_fields) : t.extra_fields) : {};
  return { ...t, advice: t.body, exam_type: ef.exam_type, study_start: ef.study_start, daily_hours: ef.daily_hours, references: ef.references, hard_subject: ef.hard_subject };
}

async function loadTaikenki() {
  const el = document.getElementById('taikenki-list');
  if (!db) { el.innerHTML = emptyState('ğŸ†','DBæœªæ¥ç¶š','',false); return; }
  try {
    const { data, error } = await db.from('posts').select('*').eq('category','taikenki').order('created_at',{ascending:false}).limit(50);
    if (error) throw error;
    tkAllData = (data || []).map(parseTk);
    renderTaikenki();
  } catch(e) { console.error(e); el.innerHTML = emptyState('âš ï¸','èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼','',false); }
}

function filterTk(fac, el) { setActiveChip('tk-faculty-filter', el); tkFacFilter=fac; renderTaikenki(); }

function renderTaikenki() {
  const el = document.getElementById('taikenki-list');
  const list = tkFacFilter==='all' ? tkAllData : tkAllData.filter(t=>t.faculty===tkFacFilter);
  if (!list.length) {
    el.innerHTML = emptyState('ğŸ†','ã¾ã ä½“é¨“è¨˜ãŒã‚ã‚Šã¾ã›ã‚“','åœ¨å­¦ç”Ÿæ²ç¤ºæ¿ã®ã€Œå—é¨“ç”Ÿã‚µãƒãƒ¼ãƒˆã€ã‚¿ãƒ–ã‹ã‚‰æŠ•ç¨¿ã§ãã¾ã™',true);
    return;
  }
  el.innerHTML = list.map(t => {
    const fTag = t.faculty ? `<span class="tk-faculty-tag">${escHtml(FACULTIES[t.faculty]||t.faculty)}</span>` : '';
    const eTag = t.exam_type ? `<span class="tk-exam-tag">${escHtml(t.exam_type)}</span>` : '';
    return `<div class="tk-card" onclick="openTkDetail(${JSON.stringify(t.id)})">
      <div class="tk-card-head">${fTag}${eTag}</div>
      <div class="tk-stats">
        ${t.study_start ? `<div class="tk-stat"><div class="tk-stat-label">å‹‰å¼·é–‹å§‹</div><div class="tk-stat-value">${escHtml(t.study_start)}</div></div>` : ''}
        ${t.daily_hours ? `<div class="tk-stat"><div class="tk-stat-label">1æ—¥ã®å‹‰å¼·æ™‚é–“</div><div class="tk-stat-value">${escHtml(t.daily_hours)}</div></div>` : ''}
      </div>
      <div class="tk-advice">${escHtml(t.advice)}</div>
      <div class="tk-meta">@${escHtml(t.author||'åŒ¿å')} Â· ${formatTime(t.created_at)}</div>
    </div>`;
  }).join('');
}

async function openTkDetail(id) {
  const t = tkAllData.find(x=>x.id===id); if (!t) return;
  const rows = [
    ['åˆæ ¼å­¦éƒ¨', FACULTIES[t.faculty]||t.faculty],
    ['å—é¨“æ–¹å¼', t.exam_type],
    ['å‹‰å¼·é–‹å§‹æ™‚æœŸ', t.study_start],
    ['1æ—¥ã®å¹³å‡å‹‰å¼·æ™‚é–“', t.daily_hours],
    ['ä¸€ç•ªå¤§å¤‰ã ã£ãŸç§‘ç›®', t.hard_subject],
    ['ä½¿ã£ãŸå‚è€ƒæ›¸ãƒ»ã‚µãƒ¼ãƒ“ã‚¹', t.references],
  ].filter(([,v])=>v).map(([l,v])=>`<div class="tk-detail-item"><div class="tk-detail-label">${l}</div><div class="tk-detail-value">${escHtml(v)}</div></div>`).join('');
  document.getElementById('tk-detail-content').innerHTML = `
    ${rows}
    <div class="tk-detail-item"><div class="tk-detail-label">å¾Œè¼©ã¸ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹</div><div class="tk-detail-value" style="line-height:1.75">${escHtml(t.advice)}</div></div>
    <div style="font-size:.72rem;color:var(--gray-light);margin-top:.8rem">@${escHtml(t.author||'åŒ¿å')} Â· ${formatTime(t.created_at)}</div>`;
  document.getElementById('tkModal').classList.add('open');
}
function closeTkModal() { document.getElementById('tkModal').classList.remove('open'); }

// â”€â”€ å…±é€š â”€â”€
function emptyState(icon, title, text, showLink) {
  return `<div class="empty-state" style="grid-column:1/-1">
    <div class="empty-state-icon">${icon}</div>
    <div class="empty-state-title">${title}</div>
    <div class="empty-state-text">${text}</div>
    ${showLink?`<a href="https://waseda-ten.vercel.app/" class="empty-state-btn">åœ¨å­¦ç”Ÿæ²ç¤ºæ¿ã§æŠ•ç¨¿ã™ã‚‹</a>`:''}
  </div>`;
}

// â”€â”€ ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ â”€â”€
document.getElementById('qaModal').addEventListener('click', e => { if(e.target===document.getElementById('qaModal')) closeQaModal(); });
document.getElementById('tkModal').addEventListener('click', e => { if(e.target===document.getElementById('tkModal')) closeTkModal(); });

// â”€â”€ åˆæœŸãƒ­ãƒ¼ãƒ‰ â”€â”€
document.addEventListener('DOMContentLoaded', () => {
  initGoogleAuth();
  loaded.add('faculties-tab');
  renderFacultyGrid();
  loadFacultyComments();
  document.getElementById('tabsInner').addEventListener('scroll', updateScrollBtn);
  window.addEventListener('resize', updateScrollBtn);
  updateScrollBtn();
});
</script>
</body>
</html>
